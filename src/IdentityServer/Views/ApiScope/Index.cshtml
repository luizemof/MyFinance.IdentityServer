@using IdentityServer.Models.ApiScope
@using System.Collections.Generic
@using IdentityServer.Constants

@model IEnumerable<ApiScopeModel>

<div class="container-fluid">
    <div class="row">
        <div class="col d-flex justify-content-end">
            <a class="btn btn-primary mb-2" asp-action="Edit">Novo Escopo</a>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th scope="col">Nome</th>
                        <th scope="col">Nome de exibição</th>
                        <th scope="col">Descrição</th>
                        <th scope="col">Ativo</th>
                        <th scope="col"></th>
                    </tr>
                </thead>
                <tbody>
                        @foreach (var apiScope in Model)
                        {
                            string active;
                            string activeButtonDescription;
                            string disabled = string.Empty;
                            string activeButtonClass = string.Empty;
                            if(apiScope.Enabled) 
                            {
                                active = "Sim";
                                activeButtonDescription = "Desativar";
                                activeButtonClass = "btn btn-danger";
                            }
                            else
                            {
                                active = "Não";
                                activeButtonDescription = "Ativar";
                                disabled = "disabled";
                                activeButtonClass = "btn btn-success";
                            }

                            <tr>
                                <th scope="row">@apiScope.Name</th>
                                <td>@apiScope.DisplayName</td>
                                <td>@apiScope.Description</td>
                                <td>@active</td>
                                <td class="d-flex justify-content-end">
                                    <a class="btn btn-secondary @disabled" asp-action="@ControllerConstants.EDIT" asp-route-id="@apiScope.Id">Editar</a>
                                    <a class="@activeButtonClass ml-2" style="min-width: 100px" 
                                        asp-action="Enabled" 
                                        asp-route-id="@apiScope.Id" 
                                        asp-route-isEnabled="@apiScope.Enabled"
                                    >@activeButtonDescription</a>
                                </td>
                            </tr>
                        }
                </tbody>
            </table>
        </div>
    </div>
</div>